<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.mapper.MemberMapper">
  
	<!-- 마이페이지에서 로그인한 회원 정보 보기 -->
	<select id="selectMember" parameterType="int" resultType="member">
	  select  *
	  from    member
	  where   member_no = #{memberNo}
	</select>

	<!-- 회원 조회(로그인) -->
	<select id="selectLoginMember" parameterType="String" resultType="member">
		select *
		from   member
		where  member_id = #{memberId}
		  and  member_pw = #{memberPw}
	</select>
	
	<!-- 아이디 중복 체크 -->
	<select id="countById" parameterType="string" resultType="int">
		select count(*)
		from   member
		where  member_id = #{memberId}
	</select>
	
	<!-- 회원 등록 -->
	<!-- Oracle: PK는 시퀀스를 BEFORE에 미리 뽑아 VO.memberNo에 채워 넣음 -->
	<insert id="insertMember" parameterType="member">
		<selectKey keyProperty="memberNo" resultType="int" order="BEFORE">
			SELECT member_seq.NEXTVAL FROM dual
		</selectKey>
	
		INSERT INTO member (
			member_no, member_id, member_pw, member_name,
			member_birth, member_phone, member_img, member_score
			)
		VALUES (
			#{memberNo}, #{memberId}, #{memberPw}, #{memberName},
			#{memberBirth}, #{memberPhone}, #{memberImg},
			NVL(NULLIF(#{memberScore}, 0), 2)
			)
	</insert>

</mapper>